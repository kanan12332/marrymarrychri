<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    <title>åœ£è¯å¿«ä¹</title>
    <style>
        /* åŸºç¡€æ ·å¼ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
            color: white;
            height: 100vh;
            overflow: hidden;
            background: linear-gradient(to bottom, #0a2e1d 0%, #0d3b29 100%);
        }
        
        /* èƒŒæ™¯å›¾ç‰‡å®¹å™¨ */
        #background-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.8;
        }
        
        #background-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        /* ç¬¬ä¸€é˜¶æ®µï¼šç¤¼ç›’å±å¹• */
        #gift-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: rgba(10, 31, 20, 0.3);
        }
        
        /* ç¤¼ç›’å®¹å™¨ */
        .gift-container {
            position: relative;
            width: 200px;
            height: 250px;
            cursor: pointer;
            margin-bottom: 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        /* ç¤¼ç›’å›¾ç‰‡ */
        .gift-image {
            width: 200px;
            height: 200px;
            object-fit: contain;
            filter: drop-shadow(0 10px 20px rgba(0, 0, 0, 0.5));
            animation: pulse 2s infinite ease-in-out;
        }
        
        @keyframes pulse {
            0%, 100% { 
                transform: translateY(0) scale(1); 
            }
            50% { 
                transform: translateY(-15px) scale(1.05); 
            }
        }
        
        /* ç¤¼ç›’ç¼©å°åŠ¨ç”» */
        .gift-image.shrink {
            animation: shrink 1.5s ease-out forwards;
        }
        
        @keyframes shrink {
            0% {
                transform: scale(1);
                opacity: 1;
                filter: blur(0px);
            }
            100% {
                transform: scale(0.1);
                opacity: 0.3;
                filter: blur(5px);
            }
        }
        
        /* ç‚¹å‡»å¼•å¯¼ç®­å¤´ - åœ¨ç¤¼ç›’ä¸Šæ–¹ */
        .click-arrow {
            font-size: 50px;
            color: #FFD700;
            animation: arrowBounce 1.5s infinite;
            text-shadow: 0 0 15px rgba(255, 215, 0, 0.9);
            margin-bottom: 15px;
            pointer-events: none;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        @keyframes arrowBounce {
            0%, 100% { 
                transform: translateY(0); 
                opacity: 1;
            }
            50% { 
                transform: translateY(-10px); 
                opacity: 0.8;
            }
        }
        
        /* ç‚¹å‡»æç¤ºæ–‡å­— */
        .instruction {
            font-size: 22px;
            color: #FFD700;
            text-align: center;
            padding: 15px 30px;
            background: rgba(196, 30, 58, 0.3);
            border-radius: 30px;
            border: 2px solid #FFD700;
            backdrop-filter: blur(5px);
            margin-top: 10px;
            max-width: 90%;
        }
        
        /* çˆ†ç‚¸ç²’å­å®¹å™¨ */
        .explosion-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
        }
        
        /* å½©å¸¦ç²’å­ */
        .ribbon-particle {
            position: absolute;
            border-radius: 50%;
            pointer-events: none;
            animation: explode 1s ease-out forwards;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.7);
        }
        
        @keyframes explode {
            0% {
                transform: translate(0, 0) scale(0);
                opacity: 1;
            }
            50% {
                opacity: 0.8;
            }
            100% {
                transform: translate(var(--dx), var(--dy)) scale(1);
                opacity: 0;
            }
        }
        
        /* åœ£è¯å…ƒç´ ç²’å­ï¼ˆé›ªèŠ±ã€æ˜Ÿæ˜Ÿç­‰ï¼‰ */
        .christmas-particle {
            position: absolute;
            font-size: 24px;
            pointer-events: none;
            animation: explode 1s ease-out forwards;
        }
        
        /* ============== é›ªèŠ±æ•ˆæœ ============== */
        .snow-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }
        
        .snowflake {
            position: absolute;
            top: -50px;
            pointer-events: none;
            will-change: transform, top;
            animation: snowFall linear infinite;
        }
        
        @keyframes snowFall {
            0% {
                transform: translateX(0) translateY(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            100% {
                transform: translateX(var(--snow-x)) translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
        
        /* é›ªèŠ±æ‹–å°¾ç²’å­ - ä¿®å¤ï¼šæ‹–å°¾åœ¨é›ªèŠ±åé¢ */
        .snow-trail {
            position: absolute;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.6);
            pointer-events: none;
            opacity: 0;
            filter: blur(1px);
        }
        
        /* ============== 9ç§’ç¡¬æ§åŠ¨ç”» ============== */
        .hard-control-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            display: none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
        
        /* åœ£è¯è€äººé£åˆ°ä¸­é—´åŠ¨ç”» - ä¿®å¤ */
        .santa-flying-center {
            position: fixed;
            width: 200px;
            height: auto;
            z-index: 1001;
            pointer-events: none;
            opacity: 0;
            top: 30%;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .santa-flying-center.visible {
            opacity: 1;
            animation: santaFlyToCenter 9s ease-in-out forwards;
        }
        
        @keyframes santaFlyToCenter {
            0% {
                transform: translateX(-50%) scale(0.5);
                opacity: 0;
            }
            10% {
                transform: translateX(-50%) scale(0.8);
                opacity: 0.8;
            }
            20% {
                transform: translateX(-50%) scale(1);
                opacity: 1;
            }
            30% {
                transform: translateX(-50%) scale(1.1);
            }
            40%, 60% {
                transform: translateX(-50%) scale(1);
            }
            70% {
                transform: translateX(-50%) scale(1);
                opacity: 1;
            }
            80% {
                transform: translateX(-50%) scale(0.8);
                opacity: 0.8;
            }
            90% {
                transform: translateX(-50%) scale(0.5);
                opacity: 0.5;
            }
            100% {
                transform: translateX(-50%) scale(0);
                opacity: 0;
            }
        }
        
        /* æ’’ç¤¼ç‰©æ•ˆæœ - ä¿®å¤ */
        .gift-drop-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1002;
        }
        
        .dropped-gift {
            position: absolute;
            font-size: 40px;
            opacity: 0;
            pointer-events: none;
            animation: dropGift 3s ease-out forwards;
        }
        
        @keyframes dropGift {
            0% {
                transform: translate(0, 0) scale(0) rotate(0deg);
                opacity: 0;
            }
            20% {
                opacity: 1;
            }
            40% {
                transform: translate(var(--gift-x), var(--gift-y)) scale(1) rotate(180deg);
            }
            60% {
                transform: translate(var(--gift-x), var(--gift-y)) scale(1.2) rotate(360deg);
            }
            80% {
                transform: translate(var(--gift-x), var(--gift-y)) scale(0.8) rotate(540deg);
                opacity: 0.8;
            }
            100% {
                transform: translate(var(--gift-x), var(--gift-y)) scale(1) rotate(720deg);
                opacity: 0;
            }
        }
        
        /* ============== åœ£è¯è€äººåŠ¨å›¾ ============== */
        .santa-video {
            position: absolute;
            width: 180px;
            height: auto;
            filter: drop-shadow(0 5px 15px rgba(0, 0, 0, 0.5));
            z-index: 10;
            opacity: 0;
            pointer-events: none;
            top: 15%;
        }
        
        /* ç¤¼ç›’é˜¶æ®µçš„åœ£è¯è€äººï¼ˆä»å·¦åˆ°å³ï¼‰ */
        #santa-opening {
            left: -200px;
            opacity: 0.7;
        }
        
        /* ä¸»ç•Œé¢åœ£è¯è€äºº1ï¼ˆä»å·¦åˆ°å³ï¼‰ */
        .santa-left-to-right {
            left: -200px;
        }
        
        /* ä¸»ç•Œé¢åœ£è¯è€äºº2ï¼ˆä»å³åˆ°å·¦ï¼‰ */
        .santa-right-to-left {
            right: -200px;
            transform: scaleX(-1); /* é•œåƒç¿»è½¬ï¼Œé¢æœå·¦è¾¹ */
        }
        
        .santa-video.visible {
            opacity: 1;
            animation: santaFly 25s linear infinite;
        }
        
        .santa-right-to-left.visible {
            animation: santaFlyReverse 25s linear infinite;
        }
        
        @keyframes santaFly {
            0% {
                transform: translateX(0) translateY(0);
                left: -200px;
            }
            10% {
                transform: translateY(10px);
            }
            20% {
                transform: translateY(-5px);
            }
            30% {
                transform: translateY(8px);
            }
            50% {
                transform: translateY(0);
            }
            70% {
                transform: translateY(6px);
            }
            80% {
                transform: translateY(-3px);
            }
            90% {
                transform: translateY(5px);
            }
            100% {
                transform: translateY(0);
                left: 100vw;
            }
        }
        
        @keyframes santaFlyReverse {
            0% {
                transform: scaleX(-1) translateX(0) translateY(0);
                right: -200px;
            }
            10% {
                transform: scaleX(-1) translateY(10px);
            }
            20% {
                transform: scaleX(-1) translateY(-5px);
            }
            30% {
                transform: scaleX(-1) translateY(8px);
            }
            50% {
                transform: scaleX(-1) translateY(0);
            }
            70% {
                transform: scaleX(-1) translateY(6px);
            }
            80% {
                transform: scaleX(-1) translateY(-3px);
            }
            90% {
                transform: scaleX(-1) translateY(5px);
            }
            100% {
                transform: scaleX(-1) translateY(0);
                right: 100vw;
            }
        }
        
        /* ============== åœ£è¯æ ‘åŒºåŸŸ ============== */
        .tree-container {
            position: absolute;
            bottom: 10%;
            left: 5%;
            width: 280px;
            height: 420px;
            z-index: 5;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .tree-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
            filter: drop-shadow(0 8px 20px rgba(0, 0, 0, 0.6));
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .tree-image:hover {
            transform: scale(1.08) rotate(3deg);
            filter: drop-shadow(0 12px 25px rgba(0, 0, 0, 0.7));
        }
        
        .tree-title {
            font-size: 24px;
            color: #FFD700;
            margin-top: 15px;
            text-align: center;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.7);
            font-weight: bold;
            background: rgba(196, 30, 58, 0.3);
            padding: 8px 20px;
            border-radius: 15px;
            border: 2px solid #FFD700;
        }
        
        /* åœ£è¯æ ‘è£…é¥°å“ - ä¿®å¤ä½ç½® */
        .ornament {
            position: absolute;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 6;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            color: white;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        .ornament:hover {
            transform: scale(1.4);
            box-shadow: 0 8px 20px rgba(255, 255, 255, 0.4);
            z-index: 7;
        }
        
        /* è£…é¥°å“ç‹¡çŒ¾æ»‘èµ°åŠ¨ç”» */
        .ornament.escaping {
            animation: ornamentEscape 2s ease-out forwards;
            pointer-events: none;
            z-index: 100;
        }
        
        @keyframes ornamentEscape {
            0% {
                transform: translate(0, 0) scale(1);
                opacity: 1;
            }
            30% {
                transform: translate(var(--escape-x1), var(--escape-y1)) scale(1.2);
                opacity: 0.9;
            }
            60% {
                transform: translate(var(--escape-x2), var(--escape-y2)) scale(0.9);
                opacity: 0.7;
            }
            90% {
                transform: translate(var(--escape-x3), var(--escape-y3)) scale(0.7);
                opacity: 0.5;
            }
            100% {
                transform: translate(var(--escape-x4), var(--escape-y4)) scale(0.5);
                opacity: 0.3;
                pointer-events: auto; /* æ¢å¤ç‚¹å‡»äº‹ä»¶ */
            }
        }
        
        /* è£…é¥°å“å›å½’åŠ¨ç”» */
        .ornament.returning {
            animation: ornamentReturn 1.5s ease-out forwards;
            pointer-events: none;
        }
        
        @keyframes ornamentReturn {
            0% {
                transform: translate(var(--escape-x4), var(--escape-y4)) scale(0.5);
                opacity: 0.3;
            }
            100% {
                transform: translate(0, 0) scale(1);
                opacity: 1;
            }
        }
        
        /* ç¬¬äºŒé˜¶æ®µï¼šä¸»å±å¹• */
        #main-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: rgba(10, 31, 20, 0.8);
            backdrop-filter: blur(3px);
        }
        
        /* ç¥ç¦è¯­åŒºåŸŸ */
        .blessing-container {
            background: rgba(196, 30, 58, 0.15);
            border-radius: 20px;
            padding: 25px;
            margin: 20px;
            max-width: 600px;
            border: 2px solid #FFD700;
            backdrop-filter: blur(10px);
            z-index: 5;
            min-height: 200px;
        }
        
        .blessing-title {
            font-size: 28px;
            color: #FFD700;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .blessing-text {
            font-size: 20px;
            line-height: 1.6;
            color: white;
            text-align: center;
            min-height: 150px;
        }
        
        .typing-cursor {
            display: inline-block;
            width: 3px;
            height: 24px;
            background-color: #FFD700;
            animation: blink 1s infinite;
            vertical-align: middle;
            margin-left: 2px;
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }
        
        /* åœ£è¯æ ‘é—ªçƒæ•ˆæœ */
        @keyframes treeGlow {
            0%, 100% { filter: drop-shadow(0 8px 20px rgba(0, 0, 0, 0.6)); }
            50% { filter: drop-shadow(0 8px 25px rgba(255, 215, 0, 0.5)); }
        }
        
        .tree-image.glow {
            animation: treeGlow 2s infinite;
        }
        
        /* å“åº”å¼è°ƒæ•´ */
        @media screen and (max-width: 768px) {
            .gift-container {
                width: 150px;
                height: 210px;
            }
            
            .gift-image {
                width: 150px;
                height: 150px;
            }
            
            .click-arrow {
                font-size: 40px;
                margin-bottom: 10px;
                height: 50px;
            }
            
            .instruction {
                font-size: 18px;
                padding: 12px 25px;
            }
            
            .santa-video {
                width: 140px;
            }
            
            #santa-opening {
                width: 120px;
            }
            
            .santa-flying-center {
                width: 160px;
            }
            
            .tree-container {
                width: 200px;
                height: 300px;
                left: 3%;
            }
            
            .blessing-container {
                margin: 15px;
                padding: 20px;
            }
            
            .blessing-title {
                font-size: 24px;
            }
            
            .blessing-text {
                font-size: 18px;
            }
        }
        
        @media screen and (max-width: 480px) {
            .gift-container {
                width: 130px;
                height: 190px;
            }
            
            .gift-image {
                width: 130px;
                height: 130px;
            }
            
            .click-arrow {
                font-size: 35px;
                margin-bottom: 8px;
                height: 45px;
            }
            
            .instruction {
                font-size: 16px;
                padding: 10px 20px;
            }
            
            .santa-video {
                width: 100px;
            }
            
            #santa-opening {
                width: 100px;
            }
            
            .santa-flying-center {
                width: 120px;
            }
            
            .tree-container {
                width: 160px;
                height: 240px;
                left: 2%;
            }
        }
        
        /* è§¦æ‘¸è®¾å¤‡ä¼˜åŒ– */
        .gift-container:active .gift-image {
            transform: scale(0.95);
        }
    </style>
</head>
<body>
    <!-- èƒŒæ™¯å›¾ç‰‡ -->
    <div id="background-container">
        <img id="background-image" src="assets/images/background.jpg" alt="åœ£è¯èƒŒæ™¯">
    </div>
    
    <!-- é›ªèŠ±å®¹å™¨ -->
    <div class="snow-container" id="snowContainer"></div>
    
    <!-- ç¬¬ä¸€é˜¶æ®µï¼šç¤¼ç›’ç•Œé¢ -->
    <div id="gift-screen">
        <div class="gift-container" id="giftContainer">
            <!-- ç‚¹å‡»å¼•å¯¼ç®­å¤´ï¼ˆåœ¨ç¤¼ç›’ä¸Šæ–¹ï¼‰ -->
            <div class="click-arrow">ğŸ‘‡</div>
            <img src="assets/images/gift-box.png" alt="åœ£è¯ç¤¼ç›’" class="gift-image" id="giftImage">
        </div>
        <div class="instruction">ç‚¹å‡»ç¤¼ç›’å¼€å¯åœ£è¯æƒŠå–œ</div>
    </div>
    
    <!-- çˆ†ç‚¸ç²’å­å®¹å™¨ -->
    <div class="explosion-container" id="explosionContainer"></div>
    
    <!-- 9ç§’ç¡¬æ§è¦†ç›–å±‚ -->
    <div class="hard-control-overlay" id="hardControlOverlay"></div>
    
    <!-- åœ£è¯è€äººé£åˆ°ä¸­é—´åŠ¨ç”» -->
    <video class="santa-flying-center" id="santaFlyingCenter" loop muted playsinline>
        <source src="assets/video/santa.webm" type="video/webm">
        <img src="assets/images/santa-fallback.png" alt="åœ£è¯è€äºº">
    </video>
    
    <!-- æ’’ç¤¼ç‰©å®¹å™¨ -->
    <div class="gift-drop-container" id="giftDropContainer"></div>
    
    <!-- åœ£è¯è€äººåŠ¨å›¾ - ç¤¼ç›’é˜¶æ®µ -->
    <video class="santa-video" id="santaOpening" loop muted playsinline>
        <source src="assets/video/santa.webm" type="video/webm">
        <img src="assets/images/santa-fallback.png" alt="åœ£è¯è€äºº">
    </video>
    
    <!-- ç¬¬äºŒé˜¶æ®µï¼šä¸»ç•Œé¢ -->
    <div id="main-screen">
        <!-- ç¥ç¦è¯­åŒºåŸŸ -->
        <div class="blessing-container">
            <h2 class="blessing-title">ğŸ… MerryChristmasï¼ğŸ„</h2>
            <div class="blessing-text" id="blessingText">
                <!-- æ‰“å­—æœºæ•ˆæœä¼šåœ¨è¿™é‡Œæ˜¾ç¤ºæ–‡å­— -->
            </div>
        </div>
        
        <!-- åœ£è¯æ ‘åŒºåŸŸ -->
        <div class="tree-container">
            <img src="assets/images/christmas-tree.png" alt="åœ£è¯æ ‘" class="tree-image" id="christmasTree">
            <div class="tree-title">ç‚¹å‡»è£…é¥°å“å’Œå®ƒä»¬ç©æ‰è¿·è—</div>
        </div>
        
        <!-- åœ£è¯è€äººåŠ¨å›¾ - ä¸»ç•Œé¢é˜¶æ®µï¼ˆä»å·¦åˆ°å³ï¼‰ -->
        <video class="santa-video santa-left-to-right" id="santaMain1" loop muted playsinline>
            <source src="assets/video/santa.webm" type="video/webm">
            <img src="assets/images/santa-fallback.png" alt="åœ£è¯è€äºº">
        </video>
        
        <!-- åœ£è¯è€äººåŠ¨å›¾ - ä¸»ç•Œé¢é˜¶æ®µï¼ˆä»å³åˆ°å·¦ï¼‰ -->
        <video class="santa-video santa-right-to-left" id="santaMain2" loop muted playsinline>
            <source src="assets/video/santa.webm" type="video/webm">
            <img src="assets/images/santa-fallback.png" alt="åœ£è¯è€äºº">
        </video>
    </div>

    <!-- éŸ³é¢‘å…ƒç´  -->
    <audio id="openingMusic" preload="auto" loop>
        <source src="assets/audio/opening.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="mainMusic" preload="auto" loop>
        <source src="assets/audio/main.mp3" type="audio/mpeg">
    </audio>

    <script>
        // è·å–å…ƒç´ 
        const giftScreen = document.getElementById('gift-screen');
        const mainScreen = document.getElementById('main-screen');
        const giftImage = document.getElementById('giftImage');
        const explosionContainer = document.getElementById('explosionContainer');
        const giftContainer = document.getElementById('giftContainer');
        const backgroundImage = document.getElementById('background-image');
        const clickArrow = document.querySelector('.click-arrow');
        const santaOpening = document.getElementById('santaOpening');
        const santaMain1 = document.getElementById('santaMain1');
        const santaMain2 = document.getElementById('santaMain2');
        const santaFlyingCenter = document.getElementById('santaFlyingCenter');
        const snowContainer = document.getElementById('snowContainer');
        const openingMusic = document.getElementById('openingMusic');
        const mainMusic = document.getElementById('mainMusic');
        const blessingText = document.getElementById('blessingText');
        const christmasTree = document.getElementById('christmasTree');
        const treeContainer = document.querySelector('.tree-container');
        const hardControlOverlay = document.getElementById('hardControlOverlay');
        const giftDropContainer = document.getElementById('giftDropContainer');
        
        // çŠ¶æ€å˜é‡
        let isGiftOpened = false;
        let isOpeningAudioPlaying = false;
        let isMainAudioPlaying = false;
        let snowflakes = [];
        let lastTrailTime = 0;
        const trailInterval = 150;
        let hardControlTimeout;
        
        // é›ªèŠ±å›¾ç‰‡æ•°ç»„
        const snowImages = ['snow1.png', 'snow2.png', 'snow3.png'];
        
        // ç¥ç¦è¯­æ•°ç»„
        const blessings = [
            "ğŸ… ç¥æ‚¨åœ¨åœ£è¯èŠ‚æ¯ä¸€å¤©éƒ½å……æ»¡ç€æ¬¢ä¹ï¼",
            "âœ¨ Wishing you and your loved ones a season of harmony, joy, and good healthï¼",
            "ğŸ”” æ„¿åœ£è¯çš„é’Ÿå£°èƒ½å¸¦æ¥loveï¼†peaceï¼",
            "ğŸ¦Œ æ„¿æ‚¨åœ¨è¿™ä¸ªç‰¹åˆ«çš„èŠ‚æ—¥é‡Œï¼Œæ”¶è·æ»¡æ»¡çš„å¿«ä¹ä¸å®‰åº·ã€‚ï¼",
            "ğŸ‰ æœ€åç¥åå”å”å’Œæ˜å§¨åœ£è¯å¿«ä¹ï¼Œæ–°å¹´å¿«ä¹ï¼",
        ];
        
        // å½©å¸¦é¢œè‰²
        const ribbonColors = ['#FF6B6B', '#4ECDC4', '#FFD166', '#06D6A0', '#118AB2', '#EF476F'];
        
        // åœ£è¯å…ƒç´ æ•°ç»„
        const christmasElements = ['â„ï¸', 'ğŸ„', 'â­', 'ğŸ', 'ğŸ…', 'ğŸ¦Œ', 'ğŸ””', 'ğŸ•¯ï¸', 'ğŸª', 'â˜ƒï¸'];
        
        // è£…é¥°å“é¢œè‰²
        const ornamentColors = ['#FF6B6B', '#FFD166', '#06D6A0', '#118AB2', '#EF476F', '#FF9A8B'];
        
        // è£…é¥°å“å†…å®¹
        const ornamentContents = ['ğŸ„', 'ğŸ', 'â­', 'ğŸ””', 'ğŸ•¯ï¸', 'ğŸ¬', 'â„ï¸', 'ğŸ€'];
        
        // èƒŒæ™¯å›¾ç‰‡åŠ è½½å¤±è´¥å¤„ç†
        backgroundImage.onerror = function() {
            console.log("èƒŒæ™¯å›¾ç‰‡åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤èƒŒæ™¯è‰²");
            document.getElementById('background-container').style.display = 'none';
        };
        
        // ç¤¼ç›’å›¾ç‰‡åŠ è½½å¤±è´¥å¤„ç†
        giftImage.onerror = function() {
            console.log("ç¤¼ç›’å›¾ç‰‡åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨Emojiæ›¿ä»£");
            giftImage.style.display = 'none';
            const emojiGift = document.createElement('div');
            emojiGift.style.fontSize = '120px';
            emojiGift.style.animation = 'pulse 2s infinite ease-in-out';
            emojiGift.style.textAlign = 'center';
            emojiGift.style.marginTop = '20px';
            emojiGift.textContent = 'ğŸ';
            giftContainer.appendChild(emojiGift);
        };
        
        // ============== éŸ³é¢‘åŠŸèƒ½ ==============
        
        // åˆå§‹åŒ–éŸ³é¢‘
        function initAudio() {
            // è®¾ç½®éŸ³é¢‘å±æ€§
            openingMusic.volume = 0.5;
            mainMusic.volume = 0.5;
            
            openingMusic.loop = true;
            mainMusic.loop = true;
            
            // ç°ä»£æµè§ˆå™¨éœ€è¦ç”¨æˆ·äº¤äº’æ‰èƒ½æ’­æ”¾éŸ³é¢‘
            openingMusic.muted = false;
            mainMusic.muted = false;
            
            // å°è¯•é¢„åŠ è½½éŸ³é¢‘
            openingMusic.load();
            mainMusic.load();
            
            console.log("éŸ³é¢‘åˆå§‹åŒ–å®Œæˆ");
        }
        
        // æ’­æ”¾ç¤¼ç›’é˜¶æ®µéŸ³ä¹
        function playOpeningMusic() {
            if (isOpeningAudioPlaying) return;
            
            openingMusic.muted = false;
            openingMusic.volume = 0.5;
            openingMusic.currentTime = 0;
            
            const playPromise = openingMusic.play();
            
            if (playPromise !== undefined) {
                playPromise.then(() => {
                    console.log('ç¤¼ç›’é˜¶æ®µéŸ³ä¹æ’­æ”¾æˆåŠŸ');
                    isOpeningAudioPlaying = true;
                }).catch(error => {
                    console.warn('ç¤¼ç›’é˜¶æ®µéŸ³é¢‘æ’­æ”¾å¤±è´¥:', error);
                });
            }
        }
        
        // æ’­æ”¾ä¸»ç•Œé¢éŸ³ä¹
        function playMainMusic() {
            // åœæ­¢ç¤¼ç›’é˜¶æ®µéŸ³ä¹
            if (isOpeningAudioPlaying) {
                openingMusic.pause();
                openingMusic.currentTime = 0;
                isOpeningAudioPlaying = false;
            }
            
            mainMusic.muted = false;
            mainMusic.volume = 0.5;
            mainMusic.currentTime = 0;
            
            const playPromise = mainMusic.play();
            
            if (playPromise !== undefined) {
                playPromise.then(() => {
                    console.log('ä¸»ç•Œé¢éŸ³ä¹æ’­æ”¾æˆåŠŸ');
                    isMainAudioPlaying = true;
                }).catch(error => {
                    console.warn('ä¸»ç•Œé¢éŸ³é¢‘æ’­æ”¾å¤±è´¥:', error);
                });
            }
        }
        
        // ============== é›ªèŠ±æ•ˆæœ - ä¿®å¤æ‹–å°¾ä½ç½® ==============
        
        // åˆ›å»ºé›ªèŠ±æ‹–å°¾ç²’å­ - ä¿®å¤ï¼šæ‹–å°¾åœ¨é›ªèŠ±åé¢
        function createSnowTrail(x, y, size, opacity) {
            const trail = document.createElement('div');
            trail.className = 'snow-trail';
            
            // è®¾ç½®ä½ç½®å’Œå¤§å° - æ‹–å°¾åœ¨é›ªèŠ±çš„ä¸Šæ–¹ä¸€ç‚¹ï¼ˆå½¢æˆæ‹–å°¾æ•ˆæœï¼‰
            trail.style.left = `${x}px`;
            trail.style.top = `${y - size * 0.3}px`;
            trail.style.width = `${size * 0.5}px`;
            trail.style.height = `${size * 0.5}px`;
            trail.style.opacity = opacity * 0.8;
            trail.style.backgroundColor = `rgba(255, 255, 255, ${opacity * 0.8})`;
            
            snowContainer.appendChild(trail);
            
            // åŠ¨ç”»ï¼šä»ä¸Šæ–¹å‘é›ªèŠ±å½“å‰ä½ç½®ç§»åŠ¨å¹¶æ¶ˆå¤±
            const animation = trail.animate([
                { 
                    opacity: opacity * 0.8, 
                    transform: 'translateY(-5px) scale(1)',
                },
                { 
                    opacity: 0, 
                    transform: 'translateY(5px) scale(0.8)',
                }
            ], {
                duration: 800,
                easing: 'ease-out'
            });
            
            animation.onfinish = () => {
                if (trail.parentNode) {
                    trail.remove();
                }
            };
        }
        
        // åˆ›å»ºé›ªèŠ±
        function createSnowflake() {
            const snowflake = document.createElement('img');
            snowflake.className = 'snowflake';
            
            const randomImage = snowImages[Math.floor(Math.random() * snowImages.length)];
            snowflake.src = `assets/images/${randomImage}`;
            
            const size = 15 + Math.random() * 25;
            snowflake.style.width = `${size}px`;
            snowflake.style.height = `${size}px`;
            
            const leftPos = Math.random() * 100;
            snowflake.style.left = `${leftPos}%`;
            
            const opacity = 0.4 + Math.random() * 0.6;
            snowflake.style.opacity = opacity;
            
            const xDrift = Math.random() * 40 - 20;
            snowflake.style.setProperty('--snow-x', `${xDrift}px`);
            
            const fallDuration = 12 + Math.random() * 18;
            snowflake.style.animationDuration = `${fallDuration}s`;
            
            const delay = Math.random() * 5;
            snowflake.style.animationDelay = `${delay}s`;
            
            const snowflakeData = {
                element: snowflake,
                size: size,
                opacity: opacity,
                lastTrailTime: 0
            };
            
            snowContainer.appendChild(snowflake);
            snowflakes.push(snowflakeData);
            
            setTimeout(() => {
                const index = snowflakes.indexOf(snowflakeData);
                if (index > -1) {
                    snowflakes.splice(index, 1);
                }
                
                if (snowflake.parentNode) {
                    snowflake.remove();
                }
                
                createSnowflake();
            }, (fallDuration + delay) * 1000);
            
            return snowflakeData;
        }
        
        // æ›´æ–°é›ªèŠ±ä½ç½®å¹¶åˆ›å»ºæ‹–å°¾
        function updateSnowflakes() {
            const currentTime = Date.now();
            
            if (currentTime - lastTrailTime > trailInterval) {
                snowflakes.forEach(snowflake => {
                    const rect = snowflake.element.getBoundingClientRect();
                    const x = rect.left + rect.width / 2;
                    const y = rect.top + rect.height / 2;
                    
                    createSnowTrail(x, y, snowflake.size, snowflake.opacity);
                });
                
                lastTrailTime = currentTime;
            }
            
            requestAnimationFrame(updateSnowflakes);
        }
        
        // å¼€å§‹ä¸‹é›ª
        function startSnow() {
            snowContainer.innerHTML = '';
            snowflakes = [];
            
            for (let i = 0; i < 25; i++) {
                setTimeout(() => {
                    createSnowflake();
                }, i * 200);
            }
            
            updateSnowflakes();
        }
        
        // ============== 9ç§’ç¡¬æ§åŠ¨ç”» ==============
        
        // å¼€å§‹ç¡¬æ§åŠ¨ç”»
        function startHardControl() {
            // æ˜¾ç¤ºç¡¬æ§è¦†ç›–å±‚
            hardControlOverlay.style.display = 'flex';
            
            // æ˜¾ç¤ºåœ£è¯è€äººé£å‘ä¸­é—´
            santaFlyingCenter.classList.add('visible');
            
            // 2ç§’åå¼€å§‹æ’’ç¤¼ç‰©
            setTimeout(() => {
                dropGifts();
            }, 2000);
            
            // 9ç§’åç»“æŸç¡¬æ§
            hardControlTimeout = setTimeout(() => {
                endHardControl();
            }, 9000);
        }
        
        // æ’’ç¤¼ç‰©æ•ˆæœ - ä¿®å¤
        function dropGifts() {
            const giftTypes = ['ğŸ', 'ğŸ„', 'â­', 'ğŸ””', 'ğŸ€', 'ğŸ¬', 'ğŸª', 'ğŸ¦Œ'];
            const dropCount = 20;
            
            for (let i = 0; i < dropCount; i++) {
                setTimeout(() => {
                    createGiftDrop(giftTypes[i % giftTypes.length]);
                }, i * 300); // æ¯300æ¯«ç§’æ’’ä¸€ä¸ªç¤¼ç‰©
            }
        }
        
        // åˆ›å»ºå•ä¸ªç¤¼ç‰©æ‰è½æ•ˆæœ - ä¿®å¤
        function createGiftDrop(giftType) {
            const gift = document.createElement('div');
            gift.className = 'dropped-gift';
            gift.textContent = giftType;
            
            // ä»å±å¹•ä¸­å¿ƒå¼€å§‹
            const centerX = window.innerWidth / 2;
            const centerY = window.innerHeight / 2 - 100;
            
            gift.style.left = `${centerX}px`;
            gift.style.top = `${centerY}px`;
            
            // éšæœºæ‰è½æ–¹å‘
            const angle = Math.random() * Math.PI * 2;
            const distance = 150 + Math.random() * 250;
            
            const x = Math.cos(angle) * distance;
            const y = Math.sin(angle) * distance;
            
            gift.style.setProperty('--gift-x', `${x}px`);
            gift.style.setProperty('--gift-y', `${y}px`);
            
            giftDropContainer.appendChild(gift);
            
            // 3ç§’åç§»é™¤ç¤¼ç‰©
            setTimeout(() => {
                if (gift.parentNode) {
                    gift.remove();
                }
            }, 3000);
        }
        
        // ç»“æŸç¡¬æ§
        function endHardControl() {
            // éšè—ç¡¬æ§è¦†ç›–å±‚
            hardControlOverlay.style.display = 'none';
            
            // éšè—åœ£è¯è€äºº
            santaFlyingCenter.classList.remove('visible');
            
            // æ¸…é™¤æ’’ç¤¼ç‰©å®¹å™¨
            giftDropContainer.innerHTML = '';
            
            // åˆ‡æ¢åˆ°ä¸»ç•Œé¢
            giftScreen.style.display = "none";
            mainScreen.style.display = "flex";
            
            // æ˜¾ç¤ºä¸¤ä¸ªåœ£è¯è€äºº
            santaMain1.classList.add('visible');
            santaMain2.classList.add('visible');
            
            // åˆ‡æ¢åˆ°ä¸»ç•Œé¢éŸ³ä¹
            playMainMusic();
            
            // å¼€å§‹ä¸‹é›ª
            startSnow();
            
            // è®¾ç½®åœ£è¯æ ‘äº¤äº’
            setupTreeInteraction();
            createOrnaments();
            
            // å¼€å§‹æ‰“å­—æœºæ•ˆæœ
            typeWriterEffect();
            
            console.log("9ç§’ç¡¬æ§ç»“æŸï¼Œåˆ‡æ¢åˆ°ä¸»å±å¹•ï¼");
        }
        
        // ============== åœ£è¯æ ‘äº¤äº’å¢å¼º - è£…é¥°å“ç‹¡çŒ¾æ»‘èµ° ==============
        
        // åˆ›å»ºåœ£è¯æ ‘è£…é¥°å“
        function createOrnaments() {
            // æ¸…ç©ºç°æœ‰è£…é¥°å“
            const existingOrnaments = treeContainer.querySelectorAll('.ornament');
            existingOrnaments.forEach(ornament => ornament.remove());
            
            // è£…é¥°å“ä½ç½®ï¼ˆç›¸å¯¹åœ£è¯æ ‘ï¼‰
            const ornamentPositions = [
                {top: '12%', left: '48%'},   // æ ‘é¡¶
                {top: '22%', left: '38%'},   // å·¦ä¸Š
                {top: '22%', left: '58%'},   // å³ä¸Š
                {top: '32%', left: '32%'},   // å·¦ä¸­ä¸Š
                {top: '32%', left: '48%'},   // ä¸­ä¸Š
                {top: '32%', left: '64%'},   // å³ä¸­ä¸Š
                {top: '45%', left: '42%'},   // å·¦ä¸­
                {top: '45%', left: '54%'},   // å³ä¸­
                {top: '58%', left: '46%'},   // å·¦ä¸‹
                {top: '58%', left: '52%'},   // ä¸­ä¸‹
                {top: '70%', left: '48%'},   // åº•éƒ¨
            ];
            
            ornamentPositions.forEach((pos, index) => {
                const ornament = document.createElement('div');
                ornament.className = 'ornament';
                ornament.style.top = pos.top;
                ornament.style.left = pos.left;
                ornament.style.backgroundColor = ornamentColors[index % ornamentColors.length];
                ornament.style.boxShadow = `0 0 15px ${ornamentColors[index % ornamentColors.length]}`;
                
                // æ·»åŠ è£…é¥°å“å†…å®¹
                ornament.textContent = ornamentContents[index % ornamentContents.length];
                
                // æ·»åŠ è£…é¥°å“åŠ¨ç”»
                ornament.style.animation = `pulse ${2 + Math.random() * 2}s infinite ease-in-out`;
                
                // ç‚¹å‡»è£…é¥°å“æ•ˆæœ - ç‹¡çŒ¾æ»‘èµ°
                ornament.addEventListener('click', function(e) {
                    e.stopPropagation();
                    
                    // å¦‚æœè£…é¥°å“æ­£åœ¨æ»‘èµ°æˆ–å›å½’ï¼Œä¸å¤„ç†
                    if (this.classList.contains('escaping') || this.classList.contains('returning')) {
                        return;
                    }
                    
                    // æ·»åŠ æ»‘èµ°ç±»
                    this.classList.add('escaping');
                    
                    // ç”Ÿæˆç‹¡çŒ¾çš„é€ƒè·‘è·¯å¾„ï¼ˆ4ä¸ªå…³é”®ç‚¹ï¼Œå½¢æˆæ›²æŠ˜è·¯å¾„ï¼‰
                    const treeRect = treeContainer.getBoundingClientRect();
                    
                    // ç¬¬ä¸€é˜¶æ®µï¼šå¿«é€Ÿå‘å·¦ä¸Šé€ƒè·‘
                    const escapeX1 = -Math.random() * 100 - 50;
                    const escapeY1 = -Math.random() * 80 - 40;
                    
                    // ç¬¬äºŒé˜¶æ®µï¼šçªç„¶è½¬å‘å³ä¸‹
                    const escapeX2 = escapeX1 + Math.random() * 150 + 80;
                    const escapeY2 = escapeY1 + Math.random() * 120 + 60;
                    
                    // ç¬¬ä¸‰é˜¶æ®µï¼šå†æ¬¡è½¬å‘å·¦ä¸Š
                    const escapeX3 = escapeX2 - Math.random() * 100 - 50;
                    const escapeY3 = escapeY2 - Math.random() * 60 - 30;
                    
                    // ç¬¬å››é˜¶æ®µï¼šæœ€ç»ˆèº²åœ¨å±å¹•è¾¹ç¼˜
                    const screenEdge = Math.random() > 0.5 ? 1 : -1;
                    const escapeX4 = screenEdge * (Math.random() * 100 + 200);
                    const escapeY4 = Math.random() > 0.5 ? 
                        Math.random() * 100 + 50 : 
                        -Math.random() * 100 - 50;
                    
                    this.style.setProperty('--escape-x1', `${escapeX1}px`);
                    this.style.setProperty('--escape-y1', `${escapeY1}px`);
                    this.style.setProperty('--escape-x2', `${escapeX2}px`);
                    this.style.setProperty('--escape-y2', `${escapeY2}px`);
                    this.style.setProperty('--escape-x3', `${escapeX3}px`);
                    this.style.setProperty('--escape-y3', `${escapeY3}px`);
                    this.style.setProperty('--escape-x4', `${escapeX4}px`);
                    this.style.setProperty('--escape-y4', `${escapeY4}px`);
                    
                    // åˆ›å»ºæ˜Ÿæ˜Ÿç²’å­æ•ˆæœ
                    createStarEffect(this, 6);
                    
                    // 2ç§’åè‡ªåŠ¨å›å½’
                    setTimeout(() => {
                        if (this.parentNode && this.classList.contains('escaping')) {
                            this.classList.remove('escaping');
                            this.classList.add('returning');
                            
                            // 3ç§’åç§»é™¤å›å½’ç±»ï¼Œæ¢å¤å¯ç‚¹å‡»çŠ¶æ€
                            setTimeout(() => {
                                if (this.parentNode) {
                                    this.classList.remove('returning');
                                }
                            }, 1500);
                        }
                    }, 2000);
                });
                
                treeContainer.appendChild(ornament);
            });
        }
        
        // åˆ›å»ºæ˜Ÿæ˜Ÿç²’å­æ•ˆæœ
        function createStarEffect(element, count = 8) {
            const rect = element.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;
            
            for (let i = 0; i < count; i++) {
                const star = document.createElement('div');
                star.textContent = 'âœ¨';
                star.style.position = 'fixed';
                star.style.left = `${centerX}px`;
                star.style.top = `${centerY}px`;
                star.style.fontSize = '20px';
                star.style.zIndex = '20';
                star.style.pointerEvents = 'none';
                
                const angle = Math.random() * Math.PI * 2;
                const distance = 30 + Math.random() * 50;
                
                document.body.appendChild(star);
                
                const animation = star.animate([
                    { 
                        transform: 'translate(0, 0) scale(0)', 
                        opacity: 1 
                    },
                    { 
                        transform: `translate(${Math.cos(angle) * distance}px, ${Math.sin(angle) * distance}px) scale(1.5)`, 
                        opacity: 0 
                    }
                ], {
                    duration: 800,
                    easing: 'ease-out'
                });
                
                animation.onfinish = () => {
                    if (star.parentNode) {
                        star.remove();
                    }
                };
            }
        }
        
        // åœ£è¯æ ‘ç‚¹å‡»äº‹ä»¶
        function setupTreeInteraction() {
            // åœ£è¯æ ‘é—ªçƒæ•ˆæœ
            setInterval(() => {
                christmasTree.classList.toggle('glow');
            }, 2000);
            
            // åœ£è¯æ ‘æ—‹è½¬æ•ˆæœ
            let treeRotation = 0;
            let isRotating = false;
            
            christmasTree.addEventListener('click', function() {
                if (isRotating) return;
                isRotating = true;
                
                // éšæœºæ—‹è½¬è§’åº¦
                treeRotation += 120 + Math.random() * 120;
                
                // åº”ç”¨æ—‹è½¬
                this.style.transition = 'transform 1.2s cubic-bezier(0.34, 1.56, 0.64, 1)';
                this.style.transform = `rotate(${treeRotation}deg)`;
                
                // åˆ›å»ºå¤§é‡æ˜Ÿæ˜Ÿæ•ˆæœ
                const rect = this.getBoundingClientRect();
                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;
                
                for (let i = 0; i < 15; i++) {
                    setTimeout(() => {
                        createStarEffect({getBoundingClientRect: () => ({
                            left: centerX,
                            top: centerY,
                            width: 0,
                            height: 0
                        })}, 5);
                    }, i * 50);
                }
                
                // é‡ç½®æ—‹è½¬çŠ¶æ€
                setTimeout(() => {
                    isRotating = false;
                }, 1200);
            });
        }
        
        // ============== æ‰“å­—æœºæ•ˆæœ ==============
        
        async function typeWriterEffect() {
            const textElement = blessingText;
            textElement.innerHTML = '';
            
            const cursor = document.createElement('span');
            cursor.className = 'typing-cursor';
            textElement.appendChild(cursor);
            
            for (let i = 0; i < blessings.length; i++) {
                const sentence = blessings[i];
                let lineElement = document.createElement('div');
                textElement.insertBefore(lineElement, cursor);
                
                for (let j = 0; j < sentence.length; j++) {
                    lineElement.textContent += sentence[j];
                    
                    const speed = 50 + Math.random() * 50;
                    await new Promise(resolve => setTimeout(resolve, speed));
                }
                
                await new Promise(resolve => setTimeout(resolve, 800));
                
                if (i < blessings.length - 1) {
                    lineElement = document.createElement('div');
                    textElement.insertBefore(lineElement, cursor);
                }
            }
            
            cursor.remove();
        }
        
        // ============== ç¤¼ç›’ç‚¹å‡»äº‹ä»¶ ==============
        
        giftContainer.addEventListener('click', openGift);
        
        document.querySelector('.instruction').addEventListener('click', function() {
            giftContainer.style.animation = 'none';
            giftContainer.offsetHeight;
            giftContainer.style.animation = 'pulse 0.5s ease-in-out';
            
            clickArrow.style.animation = 'none';
            clickArrow.offsetHeight;
            clickArrow.style.animation = 'arrowBounce 0.3s ease-in-out 3';
            
            setTimeout(() => {
                clickArrow.style.animation = 'arrowBounce 1.5s infinite';
            }, 900);
        });
        
        function openGift() {
            if (isGiftOpened) return;
            isGiftOpened = true;
            
            console.log("ç¤¼ç›’è¢«ç‚¹å‡»äº†ï¼");
            
            // æ’­æ”¾ç¤¼ç›’é˜¶æ®µéŸ³ä¹
            playOpeningMusic();
            
            // éšè—ç¤¼ç›’é˜¶æ®µçš„åœ£è¯è€äºº
            santaOpening.classList.remove('visible');
            
            // éšè—ç®­å¤´
            clickArrow.style.display = 'none';
            
            // ç¤¼ç›’å¼€å§‹ç¼©å°
            giftImage.classList.add('shrink');
            
            // å»¶è¿Ÿååˆ›å»ºçˆ†ç‚¸æ•ˆæœ
            setTimeout(() => {
                createRibbonExplosion();
                createChristmasElements();
            }, 800);
            
            // å»¶è¿Ÿåå¼€å§‹9ç§’ç¡¬æ§
            setTimeout(() => {
                // å¼€å§‹9ç§’ç¡¬æ§åŠ¨ç”»
                startHardControl();
                
                console.log("å¼€å§‹9ç§’ç¡¬æ§åŠ¨ç”»ï¼");
            }, 1500);
        }
        
        function createRibbonExplosion() {
            const rect = giftContainer.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2 - 30;
            
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'ribbon-particle';
                
                const size = 8 + Math.random() * 15;
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                
                const color = ribbonColors[Math.floor(Math.random() * ribbonColors.length)];
                particle.style.backgroundColor = color;
                
                const angle = Math.random() * Math.PI * 2;
                const distance = 80 + Math.random() * 150;
                
                const x = Math.cos(angle) * distance;
                const y = Math.sin(angle) * distance;
                
                particle.style.setProperty('--dx', `${x}px`);
                particle.style.setProperty('--dy', `${y}px`);
                
                particle.style.left = `${centerX}px`;
                particle.style.top = `${centerY}px`;
                
                explosionContainer.appendChild(particle);
                
                setTimeout(() => {
                    if (particle.parentNode) {
                        particle.remove();
                    }
                }, 1000);
            }
        }
        
        function createChristmasElements() {
            const rect = giftContainer.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2 - 30;
            
            for (let i = 0; i < 10; i++) {
                const particle = document.createElement('div');
                particle.className = 'christmas-particle';
                
                const element = christmasElements[Math.floor(Math.random() * christmasElements.length)];
                particle.textContent = element;
                
                const size = 0.8 + Math.random() * 0.4;
                particle.style.fontSize = `${size}em`;
                
                const angle = Math.random() * Math.PI * 2;
                const distance = 100 + Math.random() * 180;
                
                const x = Math.cos(angle) * distance;
                const y = Math.sin(angle) * distance;
                
                particle.style.setProperty('--dx', `${x}px`);
                particle.style.setProperty('--dy', `${y}px`);
                
                particle.style.left = `${centerX}px`;
                particle.style.top = `${centerY}px`;
                
                explosionContainer.appendChild(particle);
                
                setTimeout(() => {
                    if (particle.parentNode) {
                        particle.remove();
                    }
                }, 1000);
            }
        }
        
        // ============== é¡µé¢åˆå§‹åŒ– ==============
        
        window.addEventListener('load', function() {
            console.log("é¡µé¢åŠ è½½å®Œæˆ");
            
            // åˆå§‹åŒ–éŸ³é¢‘
            initAudio();
            
            // æ˜¾ç¤ºç¤¼ç›’é˜¶æ®µçš„åœ£è¯è€äºº
            santaOpening.classList.add('visible');
            
            // é¢„åŠ è½½å›¾ç‰‡
            const giftImg = new Image();
            giftImg.src = 'assets/images/gift-box.png';
            
            const bgImg = new Image();
            bgImg.src = 'assets/images/background.jpg';
            
            snowImages.forEach(img => {
                const snowImg = new Image();
                snowImg.src = `assets/images/${img}`;
            });
        });
    </script>
</body>
</html>